# ****************************************************************
#          vMSC Interfaces Configuration File
#          Конфигурация сетевых интерфейсов MSC
# ****************************************************************
# Этот файл содержит параметры всех сигнальных интерфейсов MSC.
# Загружается автоматически вместе с vmsc.conf, либо явно:
#   ./vmsc --config vmsc.conf --config vmsc_interfaces.conf
#
# Параметры из последнего загруженного файла перекрывают предыдущие.
# ****************************************************************
#
# ----------------------------------------------------------------
#  Команды для просмотра интерфейсов
# ----------------------------------------------------------------
#   ./vmsc --show-interfaces        # все интерфейсы + сеть + GT
#   ./vmsc --show-network           # [network]: маски, GW, NTP
#   ./vmsc --show-a-interface       # A-interface (MSC ↔ BSC)
#   ./vmsc --show-c-interface       # C-interface (MSC ↔ HLR)
#   ./vmsc --show-f-interface       # F-interface (MSC ↔ EIR)
#   ./vmsc --show-e-interface       # E-interface (MSC ↔ MSC)
#   ./vmsc --show-nc-interface      # Nc-interface (MSC-S ↔ MGW)
#   ./vmsc --show-isup-interface    # ISUP-interface (MSC ↔ PSTN)
#   ./vmsc --show-gs-interface      # Gs-interface (MSC ↔ SGSN)
#   ./vmsc --show-gt-route          # [gt-route]: таблица GT-маршрутизации
#
# ----------------------------------------------------------------
#  A-interface DTAP/BSSMAP (требует --send-udp --use-m3ua --use-sccp)
# ----------------------------------------------------------------
#  Полный LU flow (GSM 04.08 / 3GPP TS 24.008 / TS 48.008):
#   ./vmsc --send-bssmap-reset     --send-udp --use-m3ua  # BSSMAP Reset (MSC→BSC, сброс интерфейса)
#   (LU Request генерируется по умолчанию — или явно без --no-lu)
#   ./vmsc --send-dtap-id-req      --send-udp --use-m3ua  # Identity Request  (MM 0x18)
#       # --id-type <N>  1=IMSI(умолч) 2=IMEI 3=IMEISV 4=TMSI
#   ./vmsc --send-dtap-id-resp     --send-udp --use-m3ua  # Identity Response (MM 0x19, IMSI из конфига)
#   ./vmsc --send-map-sai          --send-udp --use-m3ua  # → MAP SendAuthInfo (C-interface)
#   ./vmsc --send-dtap-auth-req    --send-udp --use-m3ua  # Authentication Request (MM 0x12)
#       # --rand <32hex>  RAND-вызов 16 байт (умолч: A0A1...AEBAF)
#       # --cksn <N>      Ciphering Key Seq Number 0-6 (умолч: 0)
#   ./vmsc --send-dtap-auth-resp   --send-udp --use-m3ua  # Authentication Response (MM 0x14)
#       # --sres <8hex>   SRES 4 байта (умолч: 01020304)
#   ./vmsc --send-bssmap-cipher    --send-udp --use-m3ua  # Ciphering Mode Command (BSSMAP 0x35)
#       # --cipher-alg <N>  0x01=no_enc  0x02=A5/1(умолч)  0x04=A5/2  0x08=A5/3
#   ./vmsc --send-dtap-lu-accept   --send-udp --use-m3ua  # Location Updating Accept (MM 0x02)
#       # --tmsi <hex>  TMSI для выдачи абоненту (умолч: 0x01020304)
#   ./vmsc --send-dtap-lu-reject   --send-udp --use-m3ua  # Location Updating Reject (MM 0x04)
#       # --lu-cause <hex>  0x02=IMSIunknownHLR 0x03=illegalMS(умолч)
#       #                   0x06=illegalME 0x0B=PLMNnotAllowed
#       #                   0x0C=LAnotAllowed 0x0D=roamingNotAllowed
#
#  P8: BSSMAP Assignment / Clear / Paging (3GPP TS 48.008)
#   ./vmsc --send-bssmap-assign-req   --send-udp --use-m3ua  # Assignment Request  (BSSMAP 0x01, MSC→BSC, назначение радиоканала)
#       # --speech-ver <hex>  0x01=FR v1(умолч)  0x21=EFR  0x41=AMR-FR
#       # --cic <N>           Circuit Identity Code (номер TDM канала, умолч: 1)
#   ./vmsc --send-bssmap-assign-compl --send-udp --use-m3ua  # Assignment Complete (BSSMAP 0x02, BSC→MSC, канал назначен)
#   ./vmsc --send-bssmap-clear-req    --send-udp --use-m3ua  # Clear Request       (BSSMAP 0x22, BSC→MSC, BSC инициирует освобождение)
#   ./vmsc --send-bssmap-clear-compl  --send-udp --use-m3ua  # Clear Complete      (BSSMAP 0x21, BSC→MSC, ресурсы BSC освобождены)
#   ./vmsc --send-bssmap-paging       --send-udp --use-m3ua  # Paging              (BSSMAP 0x52, MSC→BSC, входящий вызов/SMS)
#       # LAC берётся из конфига (lac=); можно переопределить --lac <N>
#
#  P9: DTAP MM/CC — управление вызовом (GSM 04.08 / 3GPP TS 24.008)
#  MO-call flow: CM-SrvReq → Setup(MO) → CallProc → [Assignment] → Alerting → Connect → ConnAck → Disconnect → Release → RelCompl
#  MT-call flow: [Paging] → [CM-SrvReq] → Setup(MT) → Alerting → Connect → ConnAck → Disconnect → Release → RelCompl
#
#   ./vmsc --send-dtap-cm-srv-req    --send-udp --use-m3ua  # CM Service Request (MM 0x24, MS→MSC, перед MO-вызовом)
#   ./vmsc --send-dtap-cm-srv-acc    --send-udp --use-m3ua  # CM Service Accept  (MM 0x21, MSC→MS)
#   ./vmsc --send-dtap-cc-setup-mo   --send-udp --use-m3ua  # CC Setup MO        (CC 0x05, MS→MSC, msisdn из конфига)
#   ./vmsc --send-dtap-cc-setup-mt   --send-udp --use-m3ua  # CC Setup MT        (CC 0x05, MSC→MS, msisdn из конфига)
#       # --ti <N>        Transaction Identifier 0-7 (умолч: 0)
#   ./vmsc --send-dtap-cc-call-proc  --send-udp --use-m3ua  # CC Call Proceeding (CC 0x02, MSC→MS)
#   ./vmsc --send-dtap-cc-alerting   --send-udp --use-m3ua  # CC Alerting        (CC 0x01, MSC→MS)
#   ./vmsc --send-dtap-cc-connect    --send-udp --use-m3ua  # CC Connect         (CC 0x07, умолч: MSC→MS)
#   ./vmsc --send-dtap-cc-connect    --ms-to-net --send-udp --use-m3ua  # CC Connect (MS→MSC, ответ абонента)
#   ./vmsc --send-dtap-cc-connect-ack --send-udp --use-m3ua # CC Connect Ack     (CC 0x0F, MSC→MS)
#   ./vmsc --send-dtap-cc-disconnect --send-udp --use-m3ua  # CC Disconnect      (CC 0x25, умолч: MSC→MS, cause=16)
#   ./vmsc --send-dtap-cc-disconnect --ms-to-net --cc-cause 17 --send-udp --use-m3ua  # Disconnect (MS→MSC, userBusy)
#       # --cc-cause <N>  Q.850: 16=normalClearing(умолч) 17=userBusy 18=noAnswer
#       #                        19=noUserResponding 20=subscriberAbsent 21=callRejected
#       # --ms-to-net     изменить направление: MS→MSC (вместо MSC→MS)
#   ./vmsc --send-dtap-cc-release    --send-udp --use-m3ua  # CC Release         (CC 0x2D, умолч: MSC→MS)
#   ./vmsc --send-dtap-cc-rel-compl  --send-udp --use-m3ua  # CC Release Complete(CC 0x2A, умолч: MSC→MS)
#
# ----------------------------------------------------------------
#  MAP / BSSAP+ сообщения (требует --send-udp --use-m3ua)
# ----------------------------------------------------------------
#  C-interface  MSC → HLR  (Begin)
#   ./vmsc --send-map-sai       --send-udp --use-m3ua   # MAP SendAuthInfo (opCode=56)
#   ./vmsc --send-map-ul        --send-udp --use-m3ua   # MAP UpdateLocation (opCode=2)
#   ./vmsc --send-map-sri       --send-udp --use-m3ua   # MAP SendRoutingInfo (opCode=22, MO-call)
#   ./vmsc --send-map-prn       --send-udp --use-m3ua   # MAP ProvideRoamingNumber (opCode=4, MT-call)
#   ./vmsc --send-map-cl        --send-udp --use-m3ua   # MAP CancelLocation (opCode=3, HLR→VLR)
#   ./vmsc --send-map-isd       --send-udp --use-m3ua   # MAP InsertSubscriberData (opCode=7, HLR→VLR)
#   ./vmsc --send-map-purge-ms  --send-udp --use-m3ua   # MAP PurgeMS (opCode=67, VLR→HLR)
#   ./vmsc --send-map-auth-failure-report --send-udp --use-m3ua  # MAP AuthenticationFailureReport (opCode=15, VLR→HLR)
#       # --failure-cause <N>  0=wrongUserResponse (умолч.)  1=wrongNetworkSignature
#  C-interface  HLR → MSC  (End, симуляция ответа HLR)
#   ./vmsc --send-map-sai-end  --dtid 0x1  --send-udp --use-m3ua  # SAI ReturnResultLast (триплет)
#   ./vmsc --send-map-ul-end   --dtid 0x1  --send-udp --use-m3ua  # UL  ReturnResultLast (hlr-Number)
#  C-interface  Ошибки MAP (симуляция)
#   ./vmsc --send-tcap-abort        --dtid 0x1 [--abort-cause 4] --send-udp --use-m3ua
#       # TCAP Abort P-AbortCause: 0=unrecognisedMessageType 1=unrecognisedTransactionID
#       #                          2=badlyFormattedTxPortion 3=incorrectTxPortion 4=resourceLimitation
#   ./vmsc --send-map-return-error  --dtid 0x1 [--invoke-id 1] [--error-code 6] --send-udp --use-m3ua
#       # MAP ReturnError в TCAP End: 1=systemFailure 3=dataMissing 5=unexpectedDataValue
#       #   6=unknownSubscriber 8=numberChanged 10=callBarred 13=roamingNotAllowed 21=facilityNotSupported
#  C-interface  Управление диалогом
#   ./vmsc --send-tcap-continue --otid 1 --dtid 100 --send-udp --use-m3ua  # TCAP Continue
#   ./vmsc --send-tcap-end      --dtid 0x1           --send-udp --use-m3ua  # TCAP End (ack)
#  F-interface  MSC → EIR
#   ./vmsc --send-map-check-imei --send-udp --use-m3ua  # MAP CheckIMEI (opCode=43)
#  E-interface  MSC ↔ MSC
#   ./vmsc --send-map-prepare-ho --send-udp --use-m3ua  # MAP PrepareHandover (opCode=68)
#   ./vmsc --send-map-end-signal --send-udp --use-m3ua  # MAP SendEndSignal (opCode=29)
#
#  P12: E-interface MAP handover supplementary (3GPP TS 29.002 §19.1)
#   ./vmsc --send-map-prep-subseq-ho      --send-udp --use-m3ua  # MAP PrepareSubsequentHandover (opCode=69)
#   ./vmsc --send-map-process-access-sig  --send-udp --use-m3ua  # MAP ProcessAccessSignalling   (opCode=33)
#  Gs-interface MSC → SGSN
#   ./vmsc --send-gs-lu          --send-udp --use-m3ua  # BSSAP+ LocationUpdate
#
#  P13: A-interface BSSMAP Handover (3GPP TS 48.008 §3.2.1.7–3.2.1.12)
#  Сценарий inter-BSC HO: HO-Required → HO-Command → HO-Succeeded → HO-Performed
#   ./vmsc --send-bssmap-ho-required   --send-udp --use-m3ua  # HO Required        (0x11, BSC→MSC)
#       # --ho-cause <hex>  причина хендовера:
#       #   0x00=radio-interface-msg-failure  0x14=radio-resources-not-available
#       #   0x58=better-cell (умолч)          0x18=ms-not-equipped
#   ./vmsc --send-bssmap-ho-command    --send-udp --use-m3ua  # HO Command         (0x12, MSC→BSC)
#       # --ho-lac  <N>   LAC целевой соты (умолч: 1)
#       # --ho-cell <N>   Cell ID целевой соты (умолч: 1)
#   ./vmsc --send-bssmap-ho-succeeded  --send-udp --use-m3ua  # HO Succeeded       (0x14, MSC→BSC, no IEs)
#   ./vmsc --send-bssmap-ho-performed  --send-udp --use-m3ua  # HO Performed       (0x17, BSC→MSC, intra-BSC)
#   ./vmsc --send-bssmap-ho-candidate  --send-udp --use-m3ua  # HO Candidate Enquiry (0x4F, MSC→BSC)
#       # --ho-lac  <N>   LAC для запроса кандидатов
#
#  P14: A-interface DTAP MM Supplementary (3GPP TS 24.008 §9.2.18/26/27, §9.1.9)
#  Флоу перераспределения TMSI: LU-Accept → TMSI-Realloc-Cmd → TMSI-Realloc-Compl
#   ./vmsc --send-dtap-tmsi-realloc-cmd    --send-udp --use-m3ua  # TMSI Realloc Command  (MM 0x1A, MSC→MS)
#       # --tmsi <hex>   новый TMSI (умолч.: 0x01020304)
#       # --lac  <N>     LAC (умолч.: из [a-interface])
#   ./vmsc --send-dtap-tmsi-realloc-compl  --send-udp --use-m3ua  # TMSI Realloc Complete (MM 0x1B, MS→MSC)
#   ./vmsc --send-dtap-mm-info             --send-udp --use-m3ua  # MM Information        (MM 0x32, MSC→MS)
#       # --mm-tz <hex>  TZ-байт (TS 23.040 §9.2.3.11 BCD, знак=bit3 lo-nibble)
#       #   0x21=UTC+3(Москва,умолч.)  0x00=UTC+0  0x40=UTC-2  0x4A=UTC-6
#   ./vmsc --send-dtap-cipher-compl        --send-udp --use-m3ua  # Ciphering Mode Complete (RR 0x32, MS→MSC)
#       # Ответ на Ciphering Mode Command (P6) — подтверждение шифрования
#
#  P10: Gs-interface BSSAP+ Paging / Detach / Reset (3GPP TS 29.018)
#   ./vmsc --send-gs-paging       --send-udp --use-m3ua  # MS-Paging-Request     (0x09, MSC→SGSN, IMSI+VLR-Number)
#       # --gs-peer-number <E.164>  VLR-Number (умолч: msc_gt из конфига)
#   ./vmsc --send-gs-imsi-detach  --send-udp --use-m3ua  # IMSI-Detach-Indication(0x05, MSC→SGSN)
#       # --gs-detach-type <N>      0=power-off(умолч) 1=reattach-required 2=GPRS-detach
#       # --gs-peer-number <E.164>  SGSN-Number
#   ./vmsc --send-gs-reset        --send-udp --use-m3ua  # Reset                 (0x0B, MSC→SGSN)
#       # --gs-reset-cause <N>      0=power-on(умолч) 1=om-intervention 2=load-control
#   ./vmsc --send-gs-reset-ack    --send-udp --use-m3ua  # Reset-Acknowledge     (0x0C, SGSN→MSC)
#
# ----------------------------------------------------------------
#  ISUP сообщения (SI=5, без SCCP — прямо в M3UA)
# ----------------------------------------------------------------
#  ISUP-interface  MSC ↔ PSTN/GW
#  Полный call flow: IAM → ACM → ANM → REL → RLC
#   ./vmsc --send-isup-iam                  --send-udp --use-m3ua  # IAM CIC=1 (по умолчанию)
#   ./vmsc --send-isup-iam  --cic 42        --send-udp --use-m3ua  # IAM CIC=42
#   ./vmsc --send-isup-acm                  --send-udp --use-m3ua  # ACM (абонент вызывается)
#   ./vmsc --send-isup-acm  --cic 42        --send-udp --use-m3ua  # ACM CIC=42
#   ./vmsc --send-isup-anm                  --send-udp --use-m3ua  # ANM (ответ)
#   ./vmsc --send-isup-rel                  --send-udp --use-m3ua  # REL cause=16 (normalClearing)
#   ./vmsc --send-isup-rel  --cic 42 --cause 17  --send-udp --use-m3ua  # REL userBusy
#   ./vmsc --send-isup-rlc                  --send-udp --use-m3ua  # RLC (подтверждение REL)
#       # --cic <N>   Circuit Identification Code (умолч. 1)
#       # --cause <N> Q.850: 16=normalClearing 17=userBusy 18=noAnswer
#       #             20=subscriberAbsent 21=callRejected 34=noCircuit 41=temporaryFailure
#
#
#  P11: ISUP supplementary messages (ITU-T Q.763)
#   ./vmsc --send-isup-con                  --send-udp --use-m3ua  # CON Connect          (MT=0x07)
#   ./vmsc --send-isup-cpg                  --send-udp --use-m3ua  # CPG Call Progress    (MT=0x2C)
#   ./vmsc --send-isup-sus                  --send-udp --use-m3ua  # SUS Suspend          (MT=0x0D)
#   ./vmsc --send-isup-sus  --sus-cause 1   --send-udp --use-m3ua  # SUS subscriber-init
#   ./vmsc --send-isup-res                  --send-udp --use-m3ua  # RES Resume           (MT=0x0E)
#       # --sus-cause <N>  0=network initiated(умолч) 1=ISDN subscriber
# ----------------------------------------------------------------
#  MAP SMS / USSD сообщения (C-interface)
# ----------------------------------------------------------------
#   ./vmsc --send-map-mo-fsm  --send-udp --use-m3ua   # MAP MO-ForwardSM (opCode=46, MS→MSC→SMSC)
#   ./vmsc --send-map-mt-fsm  --send-udp --use-m3ua   # MAP MT-ForwardSM (opCode=44, SMSC→MSC→MS)
#   ./vmsc --send-map-ussd    --send-udp --use-m3ua   # MAP processUnstructuredSS-Req (opCode=59)
#       # --sm-text  "<текст>"   текст SMS (ASCII/GSM7, до 160 символов)
#       # --ussd-str "<текст>"   строка USSD (GSM7, до 182 символов)
#
# ----------------------------------------------------------------
#  Загрузка конфигурации / сохранение
# ----------------------------------------------------------------
#   ./vmsc --config vmsc.conf --config vmsc_interfaces.conf
#   ./vmsc --save-config            # сохранить текущие параметры в vmsc.conf
#
# ****************************************************************

# ****************************************************************
#     [network]  Сетевые параметры узла MSC
# ****************************************************************
[network]
# Источник синхронизации времени (NTP).
# Критично для TCAP-таймеров, CDR-записей и SS7-меток времени.
# Без точного времени TCAP может преждевременно завершать транзакции.
ntp_primary=10.86.1.100
# Резервный NTP-сервер (опционально, используется при недоступности основного)
ntp_secondary=192.168.33.3
# Маска локальной подсети (сигнальный интерфейс MSC)
local_netmask=255.255.255.248
# Маска удалённой подсети (сеть оператора/партнёра)
remote_netmask=255.255.255.0
# Шлюз по умолчанию
gateway=100.100.100.1

# ****************************************************************
#         [A-interface]  MSC ↔ BSC  (GSM A-interface)
# ****************************************************************
[A-interface]
# ----------------------------------------------------------------
#  Сетевая идентификация (GSM 04.08 / LAI)
# ----------------------------------------------------------------
mcc=250
mnc=99
lac=12345
# ----------------------------------------------------------------
#  BSSMAP
# ----------------------------------------------------------------
cell_id=1
# ----------------------------------------------------------------
#  M3UA  NI=3 (Reserved) — один NI для BSC
# ----------------------------------------------------------------
opc=14001
dpc=14011
ni=3
si=3
sls=0
mp=0
# ----------------------------------------------------------------
#  SPID (Signaling Point ID) — опциональные метки сигнальных точек
# ----------------------------------------------------------------
local_spid=MSC_MSK
remote_spid=BSC_NVS
# ----------------------------------------------------------------
#  SCCP SSN (ITU Q.713 Annex B)
# ----------------------------------------------------------------
ssn=254
# ----------------------------------------------------------------
#  Транспорт (UDP)  — маска и шлюз: см. [network] выше
# ----------------------------------------------------------------
local_ip=168.192.0.1
local_port=2505
remote_ip=10.10.10.1
remote_port=1585

# ****************************************************************
#        [C-interface]  MSC ↔ HLR  (MAP over SCCP/M3UA)
# ****************************************************************
[C-interface]
# ----------------------------------------------------------------
#  Транспорт  — маска и шлюз: см. [network] выше
# ----------------------------------------------------------------
local_ip=168.192.0.2
local_port=2505
remote_ip=10.10.10.2
remote_port=1585
# ----------------------------------------------------------------
#  M3UA  NI=3
# ----------------------------------------------------------------
opc=14002
dpc=14012
ni=3
si=3
# ----------------------------------------------------------------
#  SCCP SSN
# ----------------------------------------------------------------
ssn_local=8
ssn_remote=6
# ----------------------------------------------------------------
#  SPID (Signaling Point ID)
# ----------------------------------------------------------------
local_spid=MSC-01
remote_spid=HLR-01
# ----------------------------------------------------------------
#  Global Title (GT-маршрутизация, ITU-T Q.713 GTI=4)
#  Раскомментировать для реальных сетей оператора (MSC→HLR по GT):
# ----------------------------------------------------------------
gt_ind=4
gt_called=79161234567   # E.164 адрес HLR (без '+', только цифры)
# (msc_gt задаётся в vmsc.conf [subscriber])

# ****************************************************************
#      [F-interface]  MSC ↔ EIR  (MAP CheckIMEI over SCCP/M3UA)
#      MAP opCode=43, AC: checkIMEI-context-v2 (3GPP TS 29.002 § 7.5)
# ****************************************************************
[F-interface]
# ----------------------------------------------------------------
#  Транспорт  — маска и шлюз: см. [network] выше
# ----------------------------------------------------------------
local_ip=168.192.0.7
local_port=2505
remote_ip=10.10.10.7
remote_port=1585
# ----------------------------------------------------------------
#  M3UA  NI=3
# ----------------------------------------------------------------
opc=14007
dpc=14017
ni=3
si=3
# ----------------------------------------------------------------
#  SCCP SSN
# ----------------------------------------------------------------
ssn_local=8
ssn_remote=11
# ----------------------------------------------------------------
#  SPID (Signaling Point ID)
# ----------------------------------------------------------------
local_spid=MSC-01
remote_spid=EIR-01
# ----------------------------------------------------------------
#  Global Title (GT-маршрутизация, ITU-T Q.713 GTI=4)
#  Раскомментировать для реальных сетей оператора (MSC→EIR по GT):
# ----------------------------------------------------------------
gt_ind=4
gt_called=79161234568   # E.164 адрес EIR (без '+', только цифры)
# (msc_gt задаётся в vmsc.conf [subscriber])

# ****************************************************************
#  [E-interface]  MSC ↔ MSC  (межсистемный хендовер, MAP)
# ****************************************************************
[E-interface]
# ----------------------------------------------------------------
#  Транспорт  — маска и шлюз: см. [network] выше
# ----------------------------------------------------------------
local_ip=168.192.0.3
local_port=2505
remote_ip=10.10.10.3
remote_port=1585
# ----------------------------------------------------------------
#  M3UA  (три NI варианта, активный NI=3)
# ----------------------------------------------------------------
#  NI=0  International
opc_ni0=1001
dpc_ni0=1011
ni=0
#  NI=2  National
opc_ni2=100
dpc_ni2=111
ni=2
#  NI=3  Reserved
opc_ni3=14003
dpc_ni3=14013
#  Активный NI
ni=3
si=3
# ----------------------------------------------------------------
#  SCCP SSN
# ----------------------------------------------------------------
ssn_local=8
ssn_remote=8
# ----------------------------------------------------------------
#  SPID (Signaling Point ID)
# ----------------------------------------------------------------
local_spid=MSC-01
remote_spid=MSC-02

# ****************************************************************
#         [Nc-interface]  MSC-S ↔ MGW  (H.248/MEGACO)
# ****************************************************************
[Nc-interface]
# ----------------------------------------------------------------
#  Транспорт  — маска и шлюз: см. [network] выше
# ----------------------------------------------------------------
local_ip=168.192.0.4
local_port=2505
remote_ip=10.10.10.4
remote_port=1585
# ----------------------------------------------------------------
#  M3UA  (три NI варианта, активный NI=3)
# ----------------------------------------------------------------
#  NI=0  International
opc_ni0=1002
dpc_ni0=1012
ni=0
#  NI=2  National
opc_ni2=102
dpc_ni2=112
ni=2
#  NI=3  Reserved
opc_ni3=14004
dpc_ni3=14014
#  Активный NI
ni=3
si=3
# ----------------------------------------------------------------
#  SPID (Signaling Point ID)
# ----------------------------------------------------------------
local_spid=MSC-S-01
remote_spid=MGW-01

# ****************************************************************
#      [ISUP-interface]  MSC ↔ PSTN/GW  (ISUP over MTP3/M3UA)
# ****************************************************************
[ISUP-interface]
# ----------------------------------------------------------------
#  Транспорт  — маска и шлюз: см. [network] выше
# ----------------------------------------------------------------
local_ip=168.192.0.5
local_port=2505
remote_ip=10.10.10.5
remote_port=1585
# ----------------------------------------------------------------
#  MTP3/M3UA  SI=5 (ISUP), активный NI=2
# ----------------------------------------------------------------
#  NI=0  International
opc_ni0=1003
dpc_ni0=1013
ni=0
#  NI=2  National
opc_ni2=103
dpc_ni2=113
#  Активный NI
ni=2
si=5
# ----------------------------------------------------------------
#  SPID (Signaling Point ID)
# ----------------------------------------------------------------
local_spid=MSC-01
remote_spid=PSTN-GW-01

# ****************************************************************
#         [Gs-interface]  MSC ↔ SGSN  (BSSAP+ over SCCP/M3UA)
# ****************************************************************
[Gs-interface]
# ----------------------------------------------------------------
#  Транспорт  — маска и шлюз: см. [network] выше
# ----------------------------------------------------------------
local_ip=168.192.0.6
local_port=2505
remote_ip=10.10.10.6
remote_port=1585
# ----------------------------------------------------------------
#  SCCP/M3UA  SI=3 (SCCP/BSSAP+), активный NI=2
# ----------------------------------------------------------------
#  NI=2  National
opc_ni2=104
dpc_ni2=114
ni=2
#  NI=3  Reserved
opc_ni3=14005
dpc_ni3=14015
#  Активный NI
ni=3
si=3
# ----------------------------------------------------------------
#  SCCP SSN
# ----------------------------------------------------------------
ssn_local=254
ssn_remote=254
# ----------------------------------------------------------------
#  SPID (Signaling Point ID)
# ----------------------------------------------------------------
local_spid=MSC-01
remote_spid=SGSN-01

# ****************************************************************
#     [gt]  Общие параметры Global Title (ITU-T Q.713, GTI=4)
# ****************************************************************
# Используется при gt_ind=4 в [C-interface], [F-interface], etc.
# При gt_ind=0 (умолчание) — маршрутизация по SSN (route-on-SSN).
# MSC E.164 (calling party GT) задаётся в vmsc.conf: msc_gt=...
# Используется при gt_ind=4 в интерфейсах (SCCP GT-маршрутизация).
# Должен принадлежать собственному нумерному диапазону оператора —
# тогда GT-route lookup покажет маршрут на собственный HLR (как и должно быть).
# ****************************************************************
[gt]
#       GT Calling Party  —  E.164 адрес самого MSC
msc_gt=79161000001
# TT  = Translation Type: 0=нет трансляции (0..255)
tt=0
# NP  = Numbering Plan: 1=E.164 (телефонный), 6=E.212 (land mobile)
np=1
# NAI = Nature of Address Indicator: 1=subscriber, 3=national, 4=international
nai=4

# ****************************************************************
#     [gt-route]  Таблица GT-маршрутизации SCCP
#
#  Longest-prefix match: выбирается маршрут с наиболее длинным
#  совпадающим префиксом E.164 номера вызываемой стороны.
#
#  Формат: route = prefix : interface : dpc : описание [: spid]
#
#    prefix     — E.164-префикс (только цифры, без '+')
#    interface  — a=A(BSC)  c=C(HLR)  f=F(EIR)  e=E(MSC)
#                 nc=Nc(MGW)  isup=ISUP(PSTN)  gs=Gs(SGSN)
#    dpc        — Destination Point Code сигнальной точки
#    описание   — произвольная метка (отображается в таблице)
#    spid       — (опционально) явная SPID-метка узла назначения;
#                 если не указана — берётся из remote_spid
#                 соответствующего интерфейса по совпадению DPC
# ****************************************************************
[gt-route]
# --- Собственная сеть (HLR своего оператора) ---
# Абоненты 7916xxxxxxx → HLR-Москва (C-interface, DPC=14012, SPID авто: HLR-01)
route=7916:c:14012:HLR-Москва
# Абоненты 7999xxxxxxx → HLR-Урал (C-interface, DPC=14013, SPID авто: HLR-01 не совпадёт — явный)
route=7999:c:14013:HLR-Урал:HLR-02
# Проверка IMEI при регистрации → EIR (F-interface, DPC=14017, SPID авто: EIR-01)
route=7044:f:14017:EIR-01

# --- Другой мобильный оператор (межсетевой роуминг / хендовер) ---
# Вызовы на МТС (7910–7919) → межсистемный E-interface на партнёрский MSC-02
route=791:e:14013:MTS-MSC-02
# Вызовы на Билайн (7903–7909) → E-interface
route=790:e:14013:Beeline-MSC-02

# --- Городская / фиксированная сеть (PSTN/GW) ---
# Городские номера Москвы (7495, 7499) → ISUP-interface, GW NI=2 (DPC=113)
route=7495:isup:113:PSTN-GW-MSK
route=7499:isup:113:PSTN-GW-MSK
# Городские номера Санкт-Петербурга (7812) → тот же ISUP-GW
route=7812:isup:113:PSTN-GW-SPB
# Экстренные и короткие номера — через PSTN-шлюз
route=112:isup:113:Emergency-GW
route=911:isup:113:Emergency-GW
